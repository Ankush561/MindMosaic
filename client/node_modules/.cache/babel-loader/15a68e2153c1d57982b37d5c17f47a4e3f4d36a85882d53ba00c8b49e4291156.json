{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Projects\\\\Mind Mosaic\\\\client\\\\src\\\\components\\\\Graph.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport * as d3 from 'd3';\nimport './Graph.css';\nimport PlusIcon from './icons/PlusIcon';\nimport LinkIcon from './icons/LinkIcon';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Graph = ({\n  nodes = [],\n  edges = [],\n  onNodeClick,\n  onNodeDoubleClick,\n  onCreateNew,\n  onCreateEdge,\n  onDeleteEdge,\n  interactionMode = 'select',\n  setInteractionMode,\n  onBackgroundClick,\n  onNodePositionChange\n}) => {\n  _s();\n  const svgRef = useRef(null);\n  const [selectedEdge, setSelectedEdge] = useState(null);\n  const linkingState = useRef({\n    sourceNode: null,\n    tempLink: null,\n    isLinking: false\n  });\n  const simulationRef = useRef();\n  const graphDimensionsRef = useRef({\n    width: 600,\n    height: 400\n  });\n  const stableViewBoxDimensionsRef = useRef({\n    width: 600,\n    height: 400\n  });\n\n  // Connect button component\n  const ConnectButton = ({\n    interactionMode,\n    setInteractionMode,\n    linkingState,\n    svgRef\n  }) => {\n    const handleClick = () => {\n      const newMode = interactionMode === 'connect' ? 'select' : 'connect';\n      setInteractionMode(newMode); // Changed from setMode to setInteractionMode\n      if (newMode === 'select') {\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        linkingState.current = {\n          sourceNode: null,\n          tempLink: null,\n          isLinking: false\n        };\n        d3.select(svgRef.current).on('mousemove.temp-link', null);\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleClick,\n      className: `button accent ${interactionMode === 'connect' ? 'active' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(LinkIcon, {\n        style: {\n          width: '1rem',\n          height: '1rem',\n          marginRight: '0.5rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), interactionMode === 'connect' ? 'Stop Connecting' : 'Connect Nodes']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Drag behavior\n  const dragBehavior = useCallback((sim, svgInstance, containerWidth, containerHeight) => {\n    return d3.drag().on('start', function (event, d) {\n      if (interactionMode !== 'select') return;\n      if (!event.active) sim.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }).on('drag', function (event, d) {\n      if (interactionMode !== 'select') return;\n      d.x = event.x;\n      d.y = event.y;\n      d.fx = event.x;\n      d.fy = event.y;\n    }).on('end', function (event, d) {\n      if (interactionMode !== 'select') return;\n      if (!event.active) sim.alphaTarget(0);\n      d.position = {\n        x: d.x,\n        y: d.y\n      };\n      d.fx = d.x;\n      d.fy = d.y;\n      if (typeof onNodePositionChange === 'function') {\n        onNodePositionChange(d._id, d.x, d.y);\n      }\n    });\n  }, [interactionMode]);\n\n  // Handle node click\n  const handleNodeClick = useCallback((event, d) => {\n    // In connect mode, process clicks even if default was prevented by drag\n    if (interactionMode !== 'connect' && event.defaultPrevented) return;\n    if (interactionMode === 'connect') {\n      if (!linkingState.current.sourceNode) {\n        // First click: select source node\n        console.log('Connect mode: selected source node', d._id);\n        linkingState.current.sourceNode = d;\n        linkingState.current.isLinking = true;\n\n        // Highlight selected node\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        d3.select(event.currentTarget).classed('selected-for-connection', true);\n\n        // Remove any existing temp link\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n\n        // Create a new temporary link\n        linkingState.current.tempLink = d3.select(svgRef.current).append('line').attr('class', 'temp-link').attr('stroke', '#A8C3A4').attr('stroke-dasharray', '5,5').attr('stroke-width', 2);\n\n        // Update the temp link on mouse move\n        d3.select(svgRef.current).on('mousemove.temp-link', e => {\n          if (linkingState.current.isLinking && linkingState.current.sourceNode) {\n            const [x, y] = d3.pointer(e, svgRef.current);\n            linkingState.current.tempLink.attr('x1', linkingState.current.sourceNode.x).attr('y1', linkingState.current.sourceNode.y).attr('x2', x).attr('y2', y);\n          }\n        });\n      } else {\n        // Second click: create the edge\n        const source = linkingState.current.sourceNode._id;\n        const target = d._id;\n        console.log('Connect mode: creating edge', {\n          source,\n          target\n        });\n        if (source && target && source !== target) {\n          onCreateEdge && onCreateEdge({\n            source,\n            target\n          });\n        }\n\n        // Cleanup linking state and visuals\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        linkingState.current = {\n          sourceNode: null,\n          tempLink: null,\n          isLinking: false\n        };\n        d3.select(svgRef.current).on('mousemove.temp-link', null);\n      }\n    } else if (onNodeClick) {\n      onNodeClick(d);\n    }\n  }, [interactionMode, onNodeClick, onCreateEdge]);\n\n  // Handle node double click\n  const handleNodeDoubleClick = useCallback((event, d) => {\n    if (event.defaultPrevented) return;\n    if (interactionMode === 'select' && onNodeDoubleClick) {\n      onNodeDoubleClick(d);\n    }\n  }, [interactionMode, onNodeDoubleClick]);\n\n  // Handle edge click\n  const handleEdgeClick = useCallback((event, d) => {\n    event.stopPropagation();\n    if (interactionMode === 'select') {\n      d3.selectAll('.link').classed('selected', false);\n      d3.select(event.currentTarget).classed('selected', true);\n      setSelectedEdge(d);\n    }\n  }, [interactionMode]);\n\n  // Handle background click\n  const handleBackgroundClick = useCallback(event => {\n    if (event.target.classList.contains('background')) {\n      d3.selectAll('.link').classed('selected', false);\n      setSelectedEdge(null);\n\n      // Cancel linking if in progress\n      if (linkingState.current.isLinking) {\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        linkingState.current = {\n          sourceNode: null,\n          tempLink: null,\n          isLinking: false\n        };\n        d3.select(svgRef.current).on('mousemove.temp-link', null);\n      }\n      if (onBackgroundClick) {\n        onBackgroundClick();\n      }\n    }\n  }, [onBackgroundClick]);\n\n  // Main effect for D3 rendering and updates\n  useEffect(() => {\n    const currentSvg = svgRef.current;\n    if (!currentSvg) return;\n    const initialWidth = graphDimensionsRef.current.width;\n    const initialHeight = graphDimensionsRef.current.height;\n    if (!simulationRef.current) {\n      simulationRef.current = d3.forceSimulation(nodes).force('link', d3.forceLink(edges).id(d => d._id).distance(150)).force('charge', d3.forceManyBody().strength(-500)).force('center', d3.forceCenter(initialWidth / 2, initialHeight / 2));\n    } else {\n      simulationRef.current.nodes(nodes).force('link', d3.forceLink(edges).id(d => d._id).distance(150));\n    }\n    simulationRef.current.alpha(0.3).restart();\n    const svg = d3.select(currentSvg);\n    const simulation = simulationRef.current;\n    if (!simulation) return;\n    svg.on('click', handleBackgroundClick);\n    let linkGroup = svg.select('g.links-group');\n    if (linkGroup.empty()) {\n      linkGroup = svg.append('g').attr('class', 'links-group');\n    }\n    let nodeGroup = svg.select('g.nodes-group');\n    if (nodeGroup.empty()) {\n      nodeGroup = svg.append('g').attr('class', 'nodes-group');\n    }\n    let defs = svg.select('defs');\n    if (defs.empty()) {\n      defs = svg.append('defs');\n    }\n    if (defs.select('#arrow').empty()) {\n      defs.append(\"marker\").attr(\"id\", \"arrow\").attr(\"viewBox\", \"0 -5 10 10\").attr(\"refX\", 20).attr(\"refY\", 0).attr(\"markerWidth\", 6).attr(\"markerHeight\", 6).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M0,-5L10,0L0,5\").attr(\"fill\", \"#A8C3A4\");\n    }\n    const liveContainerWidth = currentSvg.clientWidth;\n    const liveContainerHeight = currentSvg.clientHeight;\n    graphDimensionsRef.current = {\n      width: liveContainerWidth,\n      height: liveContainerHeight\n    };\n    if (stableViewBoxDimensionsRef.current.width === 0 && liveContainerWidth > 0) {\n      stableViewBoxDimensionsRef.current.width = liveContainerWidth;\n    }\n    if (stableViewBoxDimensionsRef.current.height === 0 && liveContainerHeight > 0) {\n      stableViewBoxDimensionsRef.current.height = liveContainerHeight;\n    }\n    const viewBoxWidth = stableViewBoxDimensionsRef.current.width > 0 ? stableViewBoxDimensionsRef.current.width : liveContainerWidth;\n    const viewBoxHeight = stableViewBoxDimensionsRef.current.height > 0 ? stableViewBoxDimensionsRef.current.height : liveContainerHeight;\n    svg.attr('viewBox', [0, 0, viewBoxWidth, viewBoxHeight]).attr('preserveAspectRatio', 'xMidYMid meet');\n\n    // Background rectangle to capture clicks for clearing selection/linking\n    let background = svg.select('rect.background');\n    if (background.empty()) {\n      background = svg.insert('rect', ':first-child').attr('class', 'background').attr('fill', 'transparent');\n    }\n    background.attr('width', viewBoxWidth).attr('height', viewBoxHeight).on('click', handleBackgroundClick);\n    nodes.forEach(node => {\n      const hasValidPositionProp = node.position && typeof node.position.x === 'number' && typeof node.position.y === 'number';\n      if (hasValidPositionProp) {\n        node.x = node.position.x;\n        node.y = node.position.y;\n        node.fx = node.position.x;\n        node.fy = node.position.y;\n      } else {\n        node.x = typeof node.x === 'number' ? node.x : Math.random() * (liveContainerWidth - 100) + 50;\n        node.y = typeof node.y === 'number' ? node.y : Math.random() * (liveContainerHeight - 100) + 50;\n        node.fx = null;\n        node.fy = null;\n        node.position = {\n          x: node.x,\n          y: node.y\n        };\n      }\n    });\n\n    // Initialize drag behavior\n    const drag = dragBehavior(simulationRef.current, currentSvg, viewBoxWidth, viewBoxHeight);\n    const nodeMap = {};\n    nodes.forEach(node => {\n      if (node && node._id) {\n        nodeMap[node._id] = node;\n      }\n    });\n\n    // Support edges where source/target may be populated objects or plain IDs\n    const resolveId = val => val && typeof val === 'object' ? val._id : val;\n    const validEdges = edges.filter(edge => {\n      if (!(edge && edge.source && edge.target)) return false;\n      const s = resolveId(edge.source);\n      const t = resolveId(edge.target);\n      return !!(nodeMap[s] && nodeMap[t]);\n    });\n    const processedEdges = validEdges.map(edge => {\n      const s = resolveId(edge.source);\n      const t = resolveId(edge.target);\n      return {\n        id: edge._id,\n        source: nodeMap[s],\n        target: nodeMap[t],\n        type: edge.type || 'related',\n        _id: edge._id\n      };\n    });\n    simulationRef.current.force('link', d3.forceLink(processedEdges).id(d => d._id)).force('charge', d3.forceManyBody().strength(-500)).force('center', d3.forceCenter(viewBoxWidth / 2, viewBoxHeight / 2)).force('collision', d3.forceCollide().radius(40));\n    simulationRef.current.alpha(0.3).restart();\n    const link = linkGroup.selectAll('path.link').data(processedEdges, d => d.id);\n    link.exit().remove();\n    const linkEnter = link.enter().append('path').attr('class', 'link').attr('fill', 'none').attr('stroke', '#A8C3A4').attr('stroke-width', 2).attr('marker-end', 'url(#arrow)');\n    const linkMerged = linkEnter.merge(link).on('click', handleEdgeClick);\n    linkMerged.attr('d', d => `M${d.source.x},${d.source.y}L${d.target.x},${d.target.y}`);\n    const node = nodeGroup.selectAll('.node').data(nodes, d => d._id);\n    node.exit().remove();\n    const nodeEnter = node.enter().append('g').attr('class', 'node');\n    if (interactionMode === 'select') {\n      nodeEnter.call(dragBehavior(simulationRef.current, currentSvg, viewBoxWidth, viewBoxHeight));\n    }\n    nodeEnter.append('circle').attr('r', 20).attr('fill', '#1B5E20').attr('stroke', '#1B5E20').attr('stroke-width', 1.5);\n    nodeEnter.append('text').attr('dx', 25).attr('dy', 4).text(d => d.title || d._id).style('font-size', '12px').style('fill', 'white');\n    const nodeMerged = nodeEnter.merge(node).attr('transform', d => `translate(${d.x},${d.y})`).on('click', handleNodeClick).on('dblclick', handleNodeDoubleClick);\n    if (interactionMode === 'select') {\n      nodeMerged.call(dragBehavior(simulationRef.current, currentSvg, viewBoxWidth, viewBoxHeight));\n    }\n    simulationRef.current.on('tick', () => {\n      linkMerged.attr('d', d => `M${d.source.x},${d.source.y}L${d.target.x},${d.target.y}`);\n      nodeMerged.attr('transform', d => `translate(${d.x},${d.y})`);\n    });\n    return () => {\n      simulationRef.current.stop();\n    };\n  }, [nodes, edges, interactionMode, onNodeClick, onNodeDoubleClick, onBackgroundClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"graph-container\",\n    style: {\n      width: '100%',\n      height: '100%',\n      padding: '1rem',\n      boxSizing: 'border-box',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      className: \"graph\",\n      style: {\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'all'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"links-group\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"nodes-group\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      style: {\n        position: 'absolute',\n        bottom: '1rem',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        display: 'flex',\n        gap: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onCreateNew,\n        className: \"button primary\",\n        children: [/*#__PURE__*/_jsxDEV(PlusIcon, {\n          style: {\n            width: '1rem',\n            height: '1rem',\n            marginRight: '0.5rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), \"Create New Node\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConnectButton, {\n        interactionMode: interactionMode,\n        setInteractionMode: setInteractionMode,\n        linkingState: linkingState,\n        svgRef: svgRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 7\n    }, this), selectedEdge && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edge-actions\",\n      style: {\n        position: 'absolute',\n        bottom: '1rem',\n        right: '1rem',\n        display: 'flex',\n        gap: '0.5rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button danger\",\n        onClick: () => {\n          if (onDeleteEdge && selectedEdge !== null && selectedEdge !== void 0 && selectedEdge._id) {\n            onDeleteEdge(selectedEdge._id);\n          }\n          setSelectedEdge(null);\n        },\n        children: \"Delete Edge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n};\n_s(Graph, \"3q65VYasPhC9IBy5thZVg5NavXo=\");\n_c = Graph;\nexport default Graph;\nvar _c;\n$RefreshReg$(_c, \"Graph\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","d3","PlusIcon","LinkIcon","jsxDEV","_jsxDEV","Graph","nodes","edges","onNodeClick","onNodeDoubleClick","onCreateNew","onCreateEdge","onDeleteEdge","interactionMode","setInteractionMode","onBackgroundClick","onNodePositionChange","_s","svgRef","selectedEdge","setSelectedEdge","linkingState","sourceNode","tempLink","isLinking","simulationRef","graphDimensionsRef","width","height","stableViewBoxDimensionsRef","ConnectButton","handleClick","newMode","select","current","selectAll","remove","classed","on","onClick","className","children","style","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","dragBehavior","sim","svgInstance","containerWidth","containerHeight","drag","event","d","active","alphaTarget","restart","fx","x","fy","y","position","_id","handleNodeClick","defaultPrevented","console","log","currentTarget","append","attr","e","pointer","source","target","handleNodeDoubleClick","handleEdgeClick","stopPropagation","handleBackgroundClick","classList","contains","currentSvg","initialWidth","initialHeight","forceSimulation","force","forceLink","id","distance","forceManyBody","strength","forceCenter","alpha","svg","simulation","linkGroup","empty","nodeGroup","defs","liveContainerWidth","clientWidth","liveContainerHeight","clientHeight","viewBoxWidth","viewBoxHeight","background","insert","forEach","node","hasValidPositionProp","Math","random","nodeMap","resolveId","val","validEdges","filter","edge","s","t","processedEdges","map","type","forceCollide","radius","link","data","exit","linkEnter","enter","linkMerged","merge","nodeEnter","call","text","title","nodeMerged","stop","padding","boxSizing","ref","pointerEvents","bottom","left","transform","display","gap","right","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/Projects/Mind Mosaic/client/src/components/Graph.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport * as d3 from 'd3';\nimport './Graph.css';\nimport PlusIcon from './icons/PlusIcon';\nimport LinkIcon from './icons/LinkIcon';\n\nconst Graph = ({ \n  nodes = [], \n  edges = [], \n  onNodeClick, \n  onNodeDoubleClick, \n  onCreateNew, \n  onCreateEdge, \n  onDeleteEdge, \n  interactionMode = 'select', \n  setInteractionMode, \n  onBackgroundClick,\n  onNodePositionChange\n}) => {\n  const svgRef = useRef(null);\n  const [selectedEdge, setSelectedEdge] = useState(null);\n  const linkingState = useRef({ \n    sourceNode: null, \n    tempLink: null, \n    isLinking: false \n  });\n  const simulationRef = useRef();\n  const graphDimensionsRef = useRef({ width: 600, height: 400 });\n  const stableViewBoxDimensionsRef = useRef({ width: 600, height: 400 });\n\n  // Connect button component\n  const ConnectButton = ({ interactionMode, setInteractionMode, linkingState, svgRef }) => {\n  const handleClick = () => {\n    const newMode = interactionMode === 'connect' ? 'select' : 'connect';\n    setInteractionMode(newMode);  // Changed from setMode to setInteractionMode\n    if (newMode === 'select') {\n      d3.select(svgRef.current).selectAll('.temp-link').remove();\n      d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n      linkingState.current = { sourceNode: null, tempLink: null, isLinking: false };\n      d3.select(svgRef.current).on('mousemove.temp-link', null);\n    }\n  };\n\n    return (\n      <button\n        onClick={handleClick}\n        className={`button accent ${interactionMode === 'connect' ? 'active' : ''}`}\n      >\n        <LinkIcon style={{ width: '1rem', height: '1rem', marginRight: '0.5rem' }} />\n        {interactionMode === 'connect' ? 'Stop Connecting' : 'Connect Nodes'}\n      </button>\n    );\n  };\n\n  // Drag behavior\n  const dragBehavior = useCallback((sim, svgInstance, containerWidth, containerHeight) => {\n    return d3.drag()\n      .on('start', function (event, d) {\n        if (interactionMode !== 'select') return;\n        if (!event.active) sim.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on('drag', function (event, d) {\n        if (interactionMode !== 'select') return;\n        d.x = event.x;\n        d.y = event.y;\n        d.fx = event.x;\n        d.fy = event.y;\n      })\n      .on('end', function (event, d) {\n        if (interactionMode !== 'select') return;\n        if (!event.active) sim.alphaTarget(0);\n        d.position = { x: d.x, y: d.y };\n        d.fx = d.x;\n        d.fy = d.y;\n        if (typeof onNodePositionChange === 'function') {\n          onNodePositionChange(d._id, d.x, d.y);\n        }\n      });\n  }, [interactionMode]);\n\n  // Handle node click\n  const handleNodeClick = useCallback((event, d) => {\n    // In connect mode, process clicks even if default was prevented by drag\n    if (interactionMode !== 'connect' && event.defaultPrevented) return;\n\n    if (interactionMode === 'connect') {\n      if (!linkingState.current.sourceNode) {\n        // First click: select source node\n        console.log('Connect mode: selected source node', d._id);\n        linkingState.current.sourceNode = d;\n        linkingState.current.isLinking = true;\n\n        // Highlight selected node\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        d3.select(event.currentTarget).classed('selected-for-connection', true);\n\n        // Remove any existing temp link\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n\n        // Create a new temporary link\n        linkingState.current.tempLink = d3.select(svgRef.current)\n          .append('line')\n          .attr('class', 'temp-link')\n          .attr('stroke', '#A8C3A4')\n          .attr('stroke-dasharray', '5,5')\n          .attr('stroke-width', 2);\n\n        // Update the temp link on mouse move\n        d3.select(svgRef.current).on('mousemove.temp-link', (e) => {\n          if (linkingState.current.isLinking && linkingState.current.sourceNode) {\n            const [x, y] = d3.pointer(e, svgRef.current);\n            linkingState.current.tempLink\n              .attr('x1', linkingState.current.sourceNode.x)\n              .attr('y1', linkingState.current.sourceNode.y)\n              .attr('x2', x)\n              .attr('y2', y);\n          }\n        });\n      } else {\n        // Second click: create the edge\n        const source = linkingState.current.sourceNode._id;\n        const target = d._id;\n        console.log('Connect mode: creating edge', { source, target });\n        if (source && target && source !== target) {\n          onCreateEdge && onCreateEdge({ source, target });\n        }\n\n        // Cleanup linking state and visuals\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        linkingState.current = { sourceNode: null, tempLink: null, isLinking: false };\n        d3.select(svgRef.current).on('mousemove.temp-link', null);\n      }\n    } else if (onNodeClick) {\n      onNodeClick(d);\n    }\n  }, [interactionMode, onNodeClick, onCreateEdge]);\n\n  // Handle node double click\n  const handleNodeDoubleClick = useCallback((event, d) => {\n    if (event.defaultPrevented) return;\n    if (interactionMode === 'select' && onNodeDoubleClick) {\n      onNodeDoubleClick(d);\n    }\n  }, [interactionMode, onNodeDoubleClick]);\n\n  // Handle edge click\n  const handleEdgeClick = useCallback((event, d) => {\n    event.stopPropagation();\n    if (interactionMode === 'select') {\n      d3.selectAll('.link').classed('selected', false);\n      d3.select(event.currentTarget).classed('selected', true);\n      setSelectedEdge(d);\n    }\n  }, [interactionMode]);\n\n  // Handle background click\n  const handleBackgroundClick = useCallback((event) => {\n    if (event.target.classList.contains('background')) {\n      d3.selectAll('.link').classed('selected', false);\n      setSelectedEdge(null);\n\n      // Cancel linking if in progress\n      if (linkingState.current.isLinking) {\n        d3.select(svgRef.current).selectAll('.temp-link').remove();\n        d3.select(svgRef.current).selectAll('.node').classed('selected-for-connection', false);\n        linkingState.current = { sourceNode: null, tempLink: null, isLinking: false };\n        d3.select(svgRef.current).on('mousemove.temp-link', null);\n      }\n\n      if (onBackgroundClick) {\n        onBackgroundClick();\n      }\n    }\n  }, [onBackgroundClick]);\n\n  // Main effect for D3 rendering and updates\n  useEffect(() => {\n    const currentSvg = svgRef.current;\n    if (!currentSvg) return;\n\n    const initialWidth = graphDimensionsRef.current.width;\n    const initialHeight = graphDimensionsRef.current.height;\n\n    if (!simulationRef.current) {\n      simulationRef.current = d3.forceSimulation(nodes)\n        .force('link', d3.forceLink(edges).id(d => d._id).distance(150))\n        .force('charge', d3.forceManyBody().strength(-500))\n        .force('center', d3.forceCenter(initialWidth / 2, initialHeight / 2));\n    } else {\n      simulationRef.current\n        .nodes(nodes)\n        .force('link', d3.forceLink(edges).id(d => d._id).distance(150));\n    }\n\n    simulationRef.current.alpha(0.3).restart();\n\n    const svg = d3.select(currentSvg);\n    const simulation = simulationRef.current;\n\n    if (!simulation) return;\n\n    svg.on('click', handleBackgroundClick);\n\n    let linkGroup = svg.select('g.links-group');\n    if (linkGroup.empty()) {\n      linkGroup = svg.append('g').attr('class', 'links-group');\n    }\n\n    let nodeGroup = svg.select('g.nodes-group');\n    if (nodeGroup.empty()) {\n      nodeGroup = svg.append('g').attr('class', 'nodes-group');\n    }\n\n    let defs = svg.select('defs');\n    if (defs.empty()) {\n      defs = svg.append('defs');\n    }\n    if (defs.select('#arrow').empty()) {\n      defs.append(\"marker\")\n        .attr(\"id\", \"arrow\")\n        .attr(\"viewBox\", \"0 -5 10 10\")\n        .attr(\"refX\", 20)\n        .attr(\"refY\", 0)\n        .attr(\"markerWidth\", 6)\n        .attr(\"markerHeight\", 6)\n        .attr(\"orient\", \"auto\")\n        .append(\"path\")\n        .attr(\"d\", \"M0,-5L10,0L0,5\")\n        .attr(\"fill\", \"#A8C3A4\");\n    }\n\n    const liveContainerWidth = currentSvg.clientWidth;\n    const liveContainerHeight = currentSvg.clientHeight;\n    graphDimensionsRef.current = { width: liveContainerWidth, height: liveContainerHeight };\n\n    if (stableViewBoxDimensionsRef.current.width === 0 && liveContainerWidth > 0) {\n      stableViewBoxDimensionsRef.current.width = liveContainerWidth;\n    }\n    if (stableViewBoxDimensionsRef.current.height === 0 && liveContainerHeight > 0) {\n      stableViewBoxDimensionsRef.current.height = liveContainerHeight;\n    }\n\n    const viewBoxWidth = stableViewBoxDimensionsRef.current.width > 0 ? stableViewBoxDimensionsRef.current.width : liveContainerWidth;\n    const viewBoxHeight = stableViewBoxDimensionsRef.current.height > 0 ? stableViewBoxDimensionsRef.current.height : liveContainerHeight;\n\n    svg\n      .attr('viewBox', [0, 0, viewBoxWidth, viewBoxHeight])\n      .attr('preserveAspectRatio', 'xMidYMid meet');\n\n    // Background rectangle to capture clicks for clearing selection/linking\n    let background = svg.select('rect.background');\n    if (background.empty()) {\n      background = svg.insert('rect', ':first-child')\n        .attr('class', 'background')\n        .attr('fill', 'transparent');\n    }\n    background\n      .attr('width', viewBoxWidth)\n      .attr('height', viewBoxHeight)\n      .on('click', handleBackgroundClick);\n\n    nodes.forEach(node => {\n      const hasValidPositionProp = node.position && typeof node.position.x === 'number' && typeof node.position.y === 'number';\n\n      if (hasValidPositionProp) {\n        node.x = node.position.x;\n        node.y = node.position.y;\n        node.fx = node.position.x;\n        node.fy = node.position.y;\n      } else {\n        node.x = typeof node.x === 'number' ? node.x : (Math.random() * (liveContainerWidth - 100) + 50);\n        node.y = typeof node.y === 'number' ? node.y : (Math.random() * (liveContainerHeight - 100) + 50);\n        node.fx = null;\n        node.fy = null;\n        node.position = { x: node.x, y: node.y };\n      }\n    });\n\n    // Initialize drag behavior\n    const drag = dragBehavior(simulationRef.current, currentSvg, viewBoxWidth, viewBoxHeight);\n\n    const nodeMap = {};\n    nodes.forEach(node => {\n      if (node && node._id) {\n        nodeMap[node._id] = node;\n      }\n    });\n\n    // Support edges where source/target may be populated objects or plain IDs\n    const resolveId = (val) => (val && typeof val === 'object') ? val._id : val;\n\n    const validEdges = edges.filter(edge => {\n      if (!(edge && edge.source && edge.target)) return false;\n      const s = resolveId(edge.source);\n      const t = resolveId(edge.target);\n      return !!(nodeMap[s] && nodeMap[t]);\n    });\n\n    const processedEdges = validEdges.map(edge => {\n      const s = resolveId(edge.source);\n      const t = resolveId(edge.target);\n      return {\n        id: edge._id,\n        source: nodeMap[s],\n        target: nodeMap[t],\n        type: edge.type || 'related',\n        _id: edge._id\n      };\n    });\n\n    simulationRef.current\n      .force('link', d3.forceLink(processedEdges).id(d => d._id))\n      .force('charge', d3.forceManyBody().strength(-500))\n      .force('center', d3.forceCenter(viewBoxWidth / 2, viewBoxHeight / 2))\n      .force('collision', d3.forceCollide().radius(40));\n\n    simulationRef.current.alpha(0.3).restart();\n\n    const link = linkGroup.selectAll('path.link').data(processedEdges, d => d.id);\n\n    link.exit().remove();\n\n    const linkEnter = link.enter().append('path')\n      .attr('class', 'link')\n      .attr('fill', 'none')\n      .attr('stroke', '#A8C3A4')\n      .attr('stroke-width', 2)\n      .attr('marker-end', 'url(#arrow)');\n\n    const linkMerged = linkEnter.merge(link)\n      .on('click', handleEdgeClick);\n\n    linkMerged\n      .attr('d', d => `M${d.source.x},${d.source.y}L${d.target.x},${d.target.y}`);\n\n    const node = nodeGroup.selectAll('.node')\n      .data(nodes, d => d._id);\n\n    node.exit().remove();\n\n    const nodeEnter = node.enter().append('g')\n      .attr('class', 'node');\n\n    if (interactionMode === 'select') {\n      nodeEnter.call(dragBehavior(simulationRef.current, currentSvg, viewBoxWidth, viewBoxHeight));\n    }\n\n    nodeEnter.append('circle')\n      .attr('r', 20)\n      .attr('fill', '#1B5E20')\n      .attr('stroke', '#1B5E20')\n      .attr('stroke-width', 1.5);\n\n    nodeEnter.append('text')\n      .attr('dx', 25)\n      .attr('dy', 4)\n      .text(d => d.title || d._id)\n      .style('font-size', '12px')\n      .style('fill', 'white');\n\n    const nodeMerged = nodeEnter.merge(node)\n      .attr('transform', d => `translate(${d.x},${d.y})`)\n      .on('click', handleNodeClick)\n      .on('dblclick', handleNodeDoubleClick);\n\n    if (interactionMode === 'select') {\n      nodeMerged.call(dragBehavior(simulationRef.current, currentSvg, viewBoxWidth, viewBoxHeight));\n    }\n\n    simulationRef.current.on('tick', () => {\n      linkMerged.attr('d', d => `M${d.source.x},${d.source.y}L${d.target.x},${d.target.y}`);\n      nodeMerged.attr('transform', d => `translate(${d.x},${d.y})`);\n    });\n\n    return () => {\n      simulationRef.current.stop();\n    };\n  }, [nodes, edges, interactionMode, onNodeClick, onNodeDoubleClick, onBackgroundClick]);\n\n  return (\n    <div className=\"graph-container\" style={{ width: '100%', height: '100%', padding: '1rem', boxSizing: 'border-box', position: 'relative' }}>\n      <svg ref={svgRef} className=\"graph\" style={{\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'all'\n      }}>\n                <g className=\"links-group\"></g>\n        <g className=\"nodes-group\"></g>\n      </svg>\n      <div className=\"controls\" style={{\n        position: 'absolute',\n        bottom: '1rem',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        display: 'flex',\n        gap: '1rem'\n      }}>\n        <button\n          onClick={onCreateNew}\n          className=\"button primary\"\n        >\n          <PlusIcon style={{ width: '1rem', height: '1rem', marginRight: '0.5rem' }} />\n          Create New Node\n        </button>\n        <ConnectButton\n          interactionMode={interactionMode}\n          setInteractionMode={setInteractionMode}\n          linkingState={linkingState}\n          svgRef={svgRef}\n        />\n      </div>\n      {selectedEdge && (\n        <div className=\"edge-actions\" style={{\n          position: 'absolute',\n          bottom: '1rem',\n          right: '1rem',\n          display: 'flex',\n          gap: '0.5rem'\n        }}>\n          <button\n            className=\"button danger\"\n            onClick={() => {\n              if (onDeleteEdge && selectedEdge?._id) {\n                onDeleteEdge(selectedEdge._id);\n              }\n              setSelectedEdge(null);\n            }}\n          >\n            Delete Edge\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Graph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}